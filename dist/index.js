function t(){return(t=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t}).apply(this,arguments)}function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function o(t,e,a){return(o=n()?Reflect.construct:function(t,e,n){var o=[null];o.push.apply(o,e);var a=new(Function.bind.apply(t,o));return n&&r(a,n.prototype),a}).apply(null,arguments)}function a(t){var n="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==n){if(n.has(t))return n.get(t);n.set(t,a)}function a(){return o(t,arguments,e(this).constructor)}return a.prototype=Object.create(t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),r(a,t)})(t)}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var c=function(t){var e,r;function n(){return t.apply(this,arguments)||this}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n.prototype.describe=function(t){this.message=t+": "+this.message},n}(a(Error)),u=Array.isArray,s=function(t){return null!==t&&"object"==typeof t&&!Array.isArray(t)};function f(t){if("string"!=typeof t)throw new c("bad path: should be a string, was "+typeof t);if("/"!==t[0]&&""!==t)throw new c('bad path: should be "" or start with "/"')}var l=function(){function t(t,e){f(t),this.tokenStrings=t.split("/").slice(1),this.nextTokenIndex=0,void 0!==e&&(f(e),this.tokenStrings=[].concat(e.split("/").slice(1),this.tokenStrings))}var e=t.prototype;return e.tokensLeft=function(){return this.tokenStrings.length-this.nextTokenIndex},e.isFullyRead=function(){return this.tokensLeft()<=0},e.readNextTokenInContext=function(t){var e=this.tokenStrings[this.nextTokenIndex];if(void 0===e){var r=this.tokenStrings.slice(0,this.nextTokenIndex-1).join("/");throw new c('pointer is already fully read; valid section was "'+r+'"')}return++this.nextTokenIndex,function(t,e){if(s(e))return t.replace("~1","/").replace("~0","~");if(u(e)){if("-"===t)return e.length;var r=parseInt(t,10);if(isNaN(r)||r!=t)throw new c("path token is not a valid array index, was "+t);return r}throw new c("token context should either be an array or a string, was "+typeof e)}(e,t)},t}();function h(t,e){if(e.isFullyRead())return t;var r=e.readNextTokenInContext(t);if(void 0===t[r])throw new c("path does not lead anywhere");return h(t[r],e)}function p(e,r,n){var o,a=r.readNextTokenInContext(e);if(r.isFullyRead())o=n;else{var i=e[a];if(!u(i)&&!s(i))throw new c("path leads to an element that is neither an array nor an object but "+typeof i);o=p(i,r,n)}if(u(e)){var f=[].concat(e);return f.splice(a,1,o),f}var l=t({},e);return l[a]=o,l}function d(e,r){var n=r.readNextTokenInContext(e);if(r.isFullyRead()){if(void 0===e[n])throw new c("path does not lead anywhere");if(u(e)){var o=[].concat(e);return o.splice(n,1),o}var a=t({},e);return delete a[n],a}var i=e[n];if(!u(i)&&!s(i))throw new c("path leads to an element that is neither an array nor an object but "+typeof i);var f=d(i,r);if(u(e)){var l=[].concat(e);return l.splice(n,1,f),l}var h=t({},e);return h[n]=f,h}exports.JsonPatchError=c,exports.apply=function(t,e){if(!Array.isArray(e))throw new c("bad patch: should be an array of operations");for(var r,n={document:t},o=function(){var t=r.value,e=function(){return new l(t.path,"/document")},o="from"in t?new l(t.from,"/document"):null;switch(t.op){case"add":try{n=p(n,e(),t.value)}catch(t){throw t.describe("add failed"),t}break;case"copy":try{var a=h(n,o);n=p(n,e(),a)}catch(t){throw t.describe("copy failed"),t}break;case"move":try{var i=h(n,o);n=d(n=p(n,e(),i),o)}catch(t){throw t.describe("move failed"),t}break;case"remove":try{n=d(n,e())}catch(t){throw t.describe("remove failed"),t}break;case"replace":try{if(!function t(e,r){if(r.isFullyRead())return!0;var n=r.readNextTokenInContext(e);return void 0!==e[n]&&t(e[n],r)}(n,e()))throw new c("path points to a nonexistent location");n=p(n,e(),t.value)}catch(t){throw t.describe("replace failed"),t}break;case"test":try{!function t(e,r){s(e)?function(e,r){if(!s(r))throw new c("test target is an object but the value is not");if(Object.keys(e).length!==Object.keys(r).length)throw new c("test target has a different number of keys than the compared value");for(var n in r)if(!(n in e))throw new c("test target lacks a key: "+n);for(var o in e)if(!(o in r))throw new c("test target has an extra key: "+o);for(var a in r)t(e[a],r[a])}(e,r):u(e)?function(e,r){if(!u(r))throw new c("test target is an array but the value is not");if(e.length!==r.length)throw new c("test target and value are arrays of differing length");for(var n=0;n<e.length;++n)t(e[n],r[n])}(e,r):function(t,e){if(t!==e)throw new c(t+" is not equal to "+JSON.stringify(e))}(e,r)}(t.value,h(n,e()))}catch(t){throw t.describe("test failed"),t}break;default:throw new c("illegal op: should be add/copy/move/remove/replace/test, was "+t.op)}},a=function(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,void 0);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,void 0):void 0}}(t))){r&&(t=r);var n=0;return function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(r=t[Symbol.iterator]()).next.bind(r)}(e);!(r=a()).done;)o();return n.document};
//# sourceMappingURL=index.js.map
